(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[6],{102:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var a=n(46),r=n(47),c=function(){function t(){Object(a.a)(this,t)}return Object(r.a)(t,null,[{key:"validate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(e,n,a){var r=void 0;return t.forEach((function(t){r||(r=t.validate(e,n,a))})),r}}}]),t}()},103:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var a=n(46),r=n(47),c=function(){function t(e){var n=e.msg;Object(a.a)(this,t),this.msg="",this.msg=n}return Object(r.a)(t,[{key:"validate",value:function(t,e,n){var a=t&&"string"===typeof t?t.trim():t;if((!a||null===a||""===a||void 0===a)&&(null===n||void 0===n?void 0:n.visited))return this.msg}}]),t}()},106:function(t,e,n){"use strict";n.d(e,"b",(function(){return h})),n.d(e,"a",(function(){return b})),n.d(e,"d",(function(){return x})),n.d(e,"c",(function(){return w}));var a=n(38),r=n(135),c=n(0),i=n.n(c),s=n(22),u=n.n(s),o=n(110),l=n.n(o),f=n(1),h=function(t){var e=t.placeholder,n=t.className,c=Object(r.a)(t,["placeholder","className"]);return Object(f.jsxs)("div",{className:l.a["input-container"],children:[c.label&&Object(f.jsx)("label",{className:l.a.input_label,children:c.label}),Object(f.jsx)("input",Object(a.a)(Object(a.a)({className:u()(l.a.input,n),onChange:c.input.onChange,value:c.input.value,name:c.input.name},c.input),{},{placeholder:e}))]})},d=n(111),m=n.n(d),b=function(t){var e=t.className,n=t.fieldProps,a=i.a.useRef(null);return Object(f.jsx)("input",{className:u()(m.a.date,e),ref:a,type:"text",onChange:n.input.onChange,name:n.input.name,value:n.input.value,placeholder:"\u0414\u0430\u0442\u0430",onFocus:function(){a&&a.current&&(a.current.type="date")},onBlur:function(){a&&a.current&&(a.current.type="text")}})},_=n(37),j=n(44),p=n(112),v=n.n(p),O=function(t){var e=t.options,n=t.onClick,a=t.onClose,r=i.a.useRef(null),c=i.a.useCallback((function(){a()}),[a]);return i.a.useEffect((function(){return document.body.addEventListener("click",c),function(){return document.body.removeEventListener("click",c)}}),[c]),Object(f.jsx)("div",{className:v.a.select_options,ref:r,children:Object(j.map)(e,(function(t,e){return Object(f.jsx)("div",{onClick:function(){return n(t)},className:v.a.select_options_item,children:t.value},"".concat(t.value,"_").concat(e))}))})},x=function(t){var e=t.fieldProps,n=t.options,a=void 0===n?[]:n,r=t.placeholder,c=i.a.useState(!1),s=Object(_.a)(c,2),u=s[0],o=s[1],l=function(){o(!1)};return Object(f.jsxs)("div",{className:v.a.select,children:[Object(f.jsx)("p",{className:v.a.select_value,onClick:function(){o((function(t){return!t}))},children:e.value.value||r||a.length&&a[0].value}),u&&Object(f.jsx)(O,{onClick:function(t){e.onChange(t),l()},options:a,onClose:l})]})},g=n(101),y=n(45),k=n(113),N=n.n(k),w=function(t){var e=t.children,n=t.title,a=t.buttonText,r=t.onSubmit,c=t.onClose;return Object(f.jsx)(y.d,{onClose:c,children:Object(f.jsx)(g.b,{onSubmit:r,render:function(t){var r=t.handleSubmit,c=t.errors;return Object(f.jsxs)("form",{onSubmit:r,children:[Object(f.jsx)("h2",{className:N.a.form_title,children:n}),e,"object"===typeof c&&Object.keys(c).length>0&&Object(f.jsx)("ul",{className:N.a.form_errors,children:Object(j.map)(Object.keys(c),(function(t,e){return Object(f.jsx)("li",{children:c[t]},"".concat(t,"_").concat(e))}))}),Object(f.jsx)("button",{className:N.a.form_btn,children:a})]})}})})}},110:function(t,e,n){t.exports={input:"style_input__2vQF3",input_label:"style_input_label__FoSHQ"}},111:function(t,e,n){t.exports={date:"style_date__1dYRe"}},112:function(t,e,n){t.exports={select:"style_select__1JzaF",select_value:"style_select_value__2D-fm",select_options:"style_select_options__2Tx-j",select_options_item:"style_select_options_item__2OxXP"}},113:function(t,e,n){t.exports={form_title:"style_form_title__1R8pq",form_errors:"style_form_errors__1KvuQ",form_btn:"style_form_btn__2sLPt"}},114:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var a=n(46),r=n(47),c=function(){function t(e){var n=e.max,r=e.min;Object(a.a)(this,t),this.max=void 0,this.min=void 0,this.max=n,this.min=r}return Object(r.a)(t,[{key:"validate",value:function(t,e,n){var a=t&&"string"===typeof t?t.trim():t;if(null===n||void 0===n?void 0:n.visited){if(this.max&&a&&a.length>this.max.count)return this.max.msg;if(this.min&&a&&a.length<this.min.count)return this.min.msg;if(!a&&(this.min||this.max)){if(this.min)return this.min.msg;if(this.max)return this.max.msg}}}}]),t}()},123:function(t,e,n){"use strict";var a=n(2),r=n.n(a),c=n(5),i=n(37),s=n(0),u=n.n(s),o=n(7),l=n(50),f=n(33),h=n(48);e.a=function(){var t=Object(o.c)(),e=u.a.useState(!!f.reactLocalStorage.get("token")),n=Object(i.a)(e,2),a=n[0],s=n[1],d=Object(h.a)((function(t){return t.user.username})),m=u.a.useCallback(function(){var t=Object(c.a)(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",l.b.authAction(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[]);return{reg:u.a.useCallback(function(){var t=Object(c.a)(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",l.b.regAction(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[]),auth:m,fetchInfo:u.a.useCallback(Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(l.b.fetchInfoAction());case 1:case"end":return e.stop()}}),e)}))),[t]),username:d,loggedIn:a,setLoggedIn:s}}},175:function(t,e,n){t.exports={auth:"style_auth__zxVX_",auth_title:"style_auth_title__1R8OT",auth_subtitle:"style_auth_subtitle__1Pu4t",auth_description:"style_auth_description__3N9Cv",auth_field:"style_auth_field__3KZ0g",auth_form:"style_auth_form__28LgK",auth_form_errors:"style_auth_form_errors__1_lJH",auth_bottom:"style_auth_bottom__2nxIY"}},179:function(t,e,n){"use strict";n.r(e),n.d(e,"setToken",(function(){return y}));var a=n(38),r=n(2),c=n.n(r),i=n(5),s=(n(0),n(101)),u=n(4),o=n(51),l=n(45),f=n(106),h=n(123),d=n(33),m=n(175),b=n.n(m),_=n(102),j=n(46),p=n(47),v=function(){function t(e){var n=e.msg;Object(j.a)(this,t),this.msg="",this.template=/^([a-z0-9_-]+\.)*[a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,6}$/,this.msg=n}return Object(p.a)(t,[{key:"validate",value:function(t,e,n){var a=t&&"string"===typeof t?t.trim():t;if((!a||null===a||""===a||void 0===a||!t.match(this.template))&&(null===n||void 0===n?void 0:n.visited))return this.msg}}]),t}(),O=n(103),x=n(114),g=n(1),y=function(t,e){d.reactLocalStorage.set("token",t),d.reactLocalStorage.set("refresh_token",e)};e.default=function(t){var e=t.isReg,n=void 0!==e&&e,r=Object(h.a)(),m=r.reg,j=r.auth,p=r.setLoggedIn,k=r.loggedIn,N=Object(u.g)();k&&N.push("/");var w=function(){var t=Object(i.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:j(e).then((function(t){var e=t.data;return y(e.access_token,e.refresh_token)})).then((function(){return p(!0)}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),C=function(){var t=Object(i.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:m(e).then((function(t){var e=t.data;return y(e.access_token,e.refresh_token)})).then((function(){return p(!0)}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),S=function(){var t=Object(i.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n?C:w)(e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(g.jsxs)("div",{className:b.a.auth,children:[Object(g.jsx)("h1",{className:b.a.auth_title,onClick:function(){return d.reactLocalStorage.clear()},children:"Pockets"}),Object(g.jsx)("h3",{className:b.a.auth_subtitle,children:n?"Adventure starts here":"Welcome to Pockets! \ud83d\udc4b\ud83c\udffb"}),Object(g.jsx)("p",{className:b.a.auth_description,children:n?"Make your app management easy and fun!":"Please sign-in to your account and start the adventure"}),Object(g.jsx)(s.b,{onSubmit:S,render:function(t){var e=t.handleSubmit,r=t.errors;return Object(g.jsxs)("form",{onSubmit:e,className:b.a.auth_form,children:["object"===typeof r&&Object(g.jsx)("ul",{className:b.a.auth_form_errors,children:Object.values(r).map((function(t){return Object(g.jsx)("li",{className:b.a.auth_form_errors_item,children:t})}))}),n&&Object(g.jsx)("div",{className:b.a.auth_field,children:Object(g.jsx)(s.a,{name:"username",label:"Usermame",render:function(t){return Object(g.jsx)(f.b,Object(a.a)({placeholder:"John Doe"},t))},validate:_.a.validate([new O.a({msg:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"}),new x.a({min:{count:4,msg:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043c\u0435\u043d\u044c\u0448\u0435 4"}})])})}),Object(g.jsx)("div",{className:b.a.auth_field,children:Object(g.jsx)(s.a,{name:"email",label:"Email",render:function(t){return Object(g.jsx)(f.b,Object(a.a)({placeholder:"johndoe@gmail.com"},t))},validate:_.a.validate([new O.a({msg:"Email \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"}),new v({msg:"Email \u0443\u043a\u0430\u0437\u0430\u043d \u043d\u0435 \u0432\u0435\u0440\u043d\u043e"})])})}),Object(g.jsx)("div",{className:b.a.auth_field,children:Object(g.jsx)(s.a,{name:"password",type:"password",label:"Password",render:function(t){return Object(g.jsx)(f.b,Object(a.a)({placeholder:"\u2689 \u2689 \u2689 \u2689 \u2689 \u2689 \u2689 \u2689"},t))},validate:_.a.validate([new O.a({msg:"\u041f\u0430\u0440\u043e\u043b\u044c \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"})])})}),Object(g.jsx)(l.b,{children:"Login"})]})}}),Object(g.jsxs)("div",{className:b.a.auth_bottom,children:[Object(g.jsx)("p",{children:n?"Already have an account?":"New on our platform?"}),n?Object(g.jsx)(o.b,{to:"/auth",children:"Sign in instead"}):Object(g.jsx)(o.b,{to:"/reg",children:"Create an account"})]})]})}}}]);
//# sourceMappingURL=6.684bdffe.chunk.js.map